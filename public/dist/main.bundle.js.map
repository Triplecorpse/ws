{"version":3,"sources":["webpack:///./src/app/data.service.ts","webpack:///./src/app/viewer-detection-output.service.ts","webpack:///./src/app/viewer-detection.service.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/people-table/people-table.component.ts","webpack:///./src/app/person/person.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/app/app.component.scss","webpack:///./src/app/people-table/people-table.component.scss","webpack:///./src/app/person/person.component.scss","webpack:///./src/app/app.component.html","webpack:///./src/app/people-table/people-table.component.html","webpack:///./src/app/person/person.component.html"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport {Http, URLSearchParams} from \"@angular/http\";\nimport {IPersonForm} from \"./i-person-form\";\n\n@Injectable()\nexport class DataService {\n\n  private api = {\n    newPerson: '/person'\n  };\n\n  constructor(public http: Http) { }\n\n  addPerson(options: IPersonForm, qty: number) {\n    let search: URLSearchParams = new URLSearchParams();\n\n    for (let option in options) {\n      if (options.hasOwnProperty(option)) {\n        search.set(option, options[option]);\n      }\n    }\n\n    search.set('qty', qty.toString());\n\n    return this.http.get(this.api.newPerson + '/add', {search});\n  }\n\n  removePerson(id: string) {\n    let search: URLSearchParams = new URLSearchParams();\n\n    search.set('id', id);\n\n    return this.http.get(this.api.newPerson + '/remove', {search});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/data.service.ts","import {Injectable} from '@angular/core';\r\nimport {Subject, ReplaySubject} from 'rxjs/Rx';\r\nimport {ViewerDetectionService} from \"./viewer-detection.service\";\r\nimport {Observable} from \"rxjs/Observable\";\r\n\r\nconst viewerUrl = 'ws://localhost:3333/';\r\n\r\n@Injectable()\r\nexport class ViewerDetectionOutputService {\r\n\r\n  constructor(public wsService: ViewerDetectionService) {\r\n    this.messages = <Subject<any>>wsService\r\n      .connect(viewerUrl)\r\n      .map((response: MessageEvent): any => {\r\n        return JSON.parse(response.data);\r\n      });\r\n\r\n    const msgQ = this.messages.share();\r\n\r\n    this.persons_alive = msgQ\r\n      .filter((response: any): any => {\r\n        return response.subject === 'persons_alive';\r\n      })\r\n      .map(alive => {\r\n        return alive.data;\r\n      });\r\n\r\n    this.person_update = msgQ\r\n      .filter((response: any): any => {\r\n        return response.subject === 'person_update';\r\n      })\r\n      .map(update => {\r\n        return update.data;\r\n      });\r\n\r\n    this.manifest = msgQ\r\n      .filter((response: any): any => {\r\n        return response.subject === 'manifest';\r\n      })\r\n      .map(manifest => {\r\n        return manifest.data;\r\n      });\r\n  }\r\n\r\n  public persons_alive: Observable<any>;\r\n  public person_update: Observable<any>;\r\n  public manifest: Observable<any>;\r\n\r\n  public messages: Subject<any>;\r\n  public up: Subject<any>;\r\n  public connection: Observable<any> = this.wsService.connection;\r\n  public ws = this.wsService.ws;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/viewer-detection-output.service.ts","import {Injectable} from '@angular/core';\r\nimport * as Rx from 'rxjs/Rx';\r\n\r\n@Injectable()\r\nexport class ViewerDetectionService {\r\n\r\n  private subject: Rx.Subject<MessageEvent>;\r\n  public connection: Rx.ReplaySubject<any>;\r\n  public ws;\r\n\r\n  constructor() {\r\n    this.connection = new Rx.ReplaySubject();\r\n  }\r\n\r\n  public connect(url): Rx.Subject<MessageEvent> {\r\n    if (!this.subject) {\r\n      this.subject = this.create(url);\r\n    }\r\n    return this.subject;\r\n  }\r\n\r\n  private create(url): Rx.Subject<MessageEvent> {\r\n    let ws = new WebSocket(url);\r\n\r\n    ws.onopen = () => {\r\n      this.connection.next({text: 'Connection established'});\r\n    };\r\n    this.ws = ws;\r\n\r\n    let observable = Rx.Observable.create((obs: Rx.Observer<MessageEvent>) => {\r\n      ws.onmessage = obs.next.bind(obs);\r\n      ws.onerror = obs.error.bind(obs);\r\n      ws.onclose = obs.complete.bind(obs);\r\n      return ws.close.bind(ws);\r\n    });\r\n\r\n    let observer = {\r\n      next: (data: Object) => {\r\n        if (ws.readyState === WebSocket.OPEN) {\r\n          ws.send(JSON.stringify(data));\r\n        }\r\n      }\r\n    };\r\n\r\n    return Rx.Subject.create(observer, observable);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/viewer-detection.service.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 353;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 353\n// module chunks = 1","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import {Component, OnDestroy} from '@angular/core';\r\n\r\nimport {ViewerDetectionOutputService} from './viewer-detection-output.service';\r\nimport {DataService} from \"./data.service\";\r\n\r\nimport * as _ from 'lodash';\r\nimport {IPersonUpdate} from \"./i-person-update\";\r\nimport {IPersonAlive} from \"./i-person-alive\";\r\nimport {IPersonForm} from \"./i-person-form\";\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\n\r\nexport class AppComponent implements OnDestroy {\r\n\r\n  private initMessage: any = {\r\n    type: 'rpc',\r\n    message_id: '26fcc4a9-2fc5-4c46-a272-5e33485d9026',\r\n    method_name: 'request_manifest',\r\n    data: {}\r\n  };\r\n  public statusText: string = 'Connecting...';\r\n  public qty = 1;\r\n  public people = [];\r\n\r\n  constructor(public viewerDetectionOutput: ViewerDetectionOutputService,\r\n              public dataService: DataService) {\r\n    viewerDetectionOutput.connection\r\n      .subscribe((data) => {\r\n        this.statusText = data.text;\r\n\r\n        viewerDetectionOutput.messages\r\n          .next(this.initMessage);\r\n      });\r\n\r\n    viewerDetectionOutput.manifest\r\n      .subscribe((data) => {\r\n      });\r\n\r\n    viewerDetectionOutput.person_update\r\n      .subscribe((person: IPersonUpdate) => {\r\n        const peopleIds = _.map(this.people, iterablePerson => iterablePerson.person_id);\r\n        const index = _.includes(peopleIds, person.person_id);\r\n\r\n        if (!index) {\r\n          this.people.push(person);\r\n        } else {\r\n          this.replacePerson(person.person_id, person);\r\n        }\r\n      });\r\n\r\n    viewerDetectionOutput.persons_alive\r\n      .subscribe((data: IPersonAlive) => {\r\n        const ids = data.person_ids;\r\n\r\n        this.cleanPeople(ids);\r\n      });\r\n\r\n  }\r\n\r\n  public submitPerson(personForm: IPersonForm): void {\r\n    console.log('add person');\r\n    this.dataService.addPerson(personForm, this.qty)\r\n      .subscribe();\r\n  }\r\n\r\n  private cleanPeople(ids): void {\r\n    const indexesToDelete = [];\r\n\r\n    _.forEach(this.people, (person, index) => {\r\n      const includes = _.includes(ids, person.person_id);\r\n\r\n      if (!includes) {\r\n        indexesToDelete.push(index);\r\n      }\r\n    });\r\n\r\n    // console.log(indexesToDelete);\r\n\r\n    _.forEach(indexesToDelete, index => {\r\n      this.people.splice(index, 1);\r\n    });\r\n  }\r\n\r\n  private replacePerson(id, newPerson) {\r\n    const index = _.findIndex(this.people, person => person.person_id === id);\r\n\r\n    this.people[index] = newPerson;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.viewerDetectionOutput.messages.unsubscribe();\r\n    this.viewerDetectionOutput.messages.complete();\r\n    this.viewerDetectionOutput.ws.close();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {BrowserModule} from '@angular/platform-browser';\r\nimport {NgModule} from '@angular/core';\r\nimport {FormsModule} from '@angular/forms';\r\nimport {HttpModule} from '@angular/http';\r\n\r\nimport {AppComponent} from './app.component';\r\n\r\nimport {ViewerDetectionService} from './viewer-detection.service';\r\nimport {ViewerDetectionOutputService} from './viewer-detection-output.service';\r\n\r\nimport {PersonComponent} from './person/person.component';\r\nimport {DataService} from \"./data.service\";\nimport { PeopleTableComponent } from './people-table/people-table.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    PersonComponent,\r\n    PeopleTableComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    HttpModule\r\n  ],\r\n  providers: [ViewerDetectionService, ViewerDetectionOutputService, DataService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import {Component, OnInit, Input} from '@angular/core';\nimport {IPersonUpdate} from \"../i-person-update\";\nimport {DataService} from \"../data.service\";\n\n@Component({\n  selector: 'app-people-table',\n  templateUrl: './people-table.component.html',\n  styleUrls: ['./people-table.component.scss']\n})\nexport class PeopleTableComponent implements OnInit {\n  @Input() people: IPersonUpdate[];\n\n  constructor(public dataService: DataService) {\n\n  }\n\n  removePerson(id: string) {\n    console.log('called re,ove');\n    this.dataService.removePerson(id)\n      .subscribe();\n  }\n\n  ngOnInit() {\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/people-table/people-table.component.ts","import {Component, Input} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-person',\r\n  templateUrl: './person.component.html',\r\n  styleUrls: ['./person.component.scss']\r\n})\r\nexport class PersonComponent {\r\n  @Input() viewer: any;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  getTime(timestamp: number): string {\r\n    const time = new Date(timestamp);\r\n\r\n    return `${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/person/person.component.ts","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".group-header {\\n  border-bottom: 1px solid lightgray; }\\n\\n.separator-top {\\n  margin-top: 20px; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.scss\n// module id = 519\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"table.table > thead > tr > th {\\n  width: 12.5%; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/people-table/people-table.component.scss\n// module id = 520\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".panel-heading {\\n  text-transform: uppercase; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/person/person.component.scss\n// module id = 521\n// module chunks = 1","module.exports = \"<div class=\\\"container\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n      <img src=\\\"../assets/advertima-logo.png\\\" alt=\\\"\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n  <div>{{statusText}}</div>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-12\\\">\\r\\n      <div class=\\\"panel panel-default\\\">\\r\\n        <div class=\\\"panel-heading\\\">New Person(s)</div>\\r\\n        <div class=\\\"panel-body\\\">\\r\\n          <form id=\\\"person-form\\\" #newPersonForm=\\\"ngForm\\\" (ngSubmit)=\\\"submitPerson(newPersonForm.value)\\\">\\r\\n            <div class=\\\"col-xs-6\\\">\\r\\n              <p class=\\\"group-header\\\">Gender: </p>\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"radio-inline\\\"><input type=\\\"radio\\\" name=\\\"gender\\\" value=\\\"male\\\" [ngModel]>Male</label>\\r\\n                <label class=\\\"radio-inline\\\"><input type=\\\"radio\\\" name=\\\"gender\\\" value=\\\"female\\\" [ngModel]>Female</label>\\r\\n                <label class=\\\"radio-inline\\\"><input type=\\\"radio\\\" name=\\\"gender\\\" value=\\\"random\\\" [ngModel]=\\\"'random'\\\">Hermaphrodite\\r\\n                  (randomize)</label>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-6\\\">\\r\\n              <p class=\\\"group-header\\\">Age: </p>\\r\\n              <div class=\\\"col-xs-6\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                  <label for=\\\"value\\\">Value</label>\\r\\n                  <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"value\\\" step=\\\".01\\\" min=\\\"1\\\" [ngModel]=\\\"30\\\"\\r\\n                         name=\\\"ageValue\\\">\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"col-xs-6\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                  <label for=\\\"ADeviation\\\">Deviation</label>\\r\\n                  <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"ADeviation\\\" step=\\\".01\\\" min=\\\"0\\\" [ngModel]=\\\"1\\\"\\r\\n                         name=\\\"ageDeviation\\\">\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-6 separator-top\\\">\\r\\n              <p class=\\\"group-header\\\">Position</p>\\r\\n              <div class=\\\"col-xs-3\\\">\\r\\n                <label for=\\\"x\\\">X</label>\\r\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"x\\\" step=\\\".01\\\" min=\\\"0\\\" [ngModel]=\\\"0\\\" name=\\\"posX\\\">\\r\\n              </div>\\r\\n              <div class=\\\"col-xs-3\\\">\\r\\n                <label for=\\\"y\\\">Y</label>\\r\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"y\\\" step=\\\".01\\\" min=\\\"0\\\" [ngModel]=\\\"0\\\" name=\\\"posY\\\">\\r\\n              </div>\\r\\n              <div class=\\\"col-xs-3\\\">\\r\\n                <label for=\\\"z\\\">Z</label>\\r\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"z\\\" step=\\\".01\\\" min=\\\"0\\\" [ngModel]=\\\"0\\\" name=\\\"posZ\\\">\\r\\n              </div>\\r\\n              <div class=\\\"col-xs-3\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                  <label for=\\\"PDeviation\\\">Deviation</label>\\r\\n                  <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"PDeviation\\\" step=\\\".01\\\" min=\\\"0\\\" [ngModel]=\\\"1\\\"\\r\\n                         name=\\\"posDeviation\\\">\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-6 separator-top\\\">\\r\\n              <p class=\\\"group-header\\\">Other Options</p>\\r\\n              <label class=\\\"checkbox-inline\\\"><input type=\\\"checkbox\\\" name=\\\"lookingAtScreen\\\" [ngModel]=\\\"false\\\">Looking at Screen</label>\\r\\n            </div>\\r\\n          </form>\\r\\n        </div>\\r\\n        <div class=\\\"panel-footer\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-xs-2 col-xs-offset-8\\\">\\r\\n              <button class=\\\"btn btn-primary btn-block\\\" type=\\\"submit\\\" form=\\\"person-form\\\">\\r\\n                <span *ngIf=\\\"qty === 1\\\">Launch person</span>\\r\\n                <span *ngIf=\\\"qty > 1\\\">Launch people</span>\\r\\n              </button>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-2\\\">\\r\\n              <div class=\\\"input-group\\\">\\r\\n                <span class=\\\"input-group-addon\\\">Quantity</span>\\r\\n                <input type=\\\"number\\\" step=\\\"1\\\" class=\\\"form-control\\\" min=\\\"1\\\" required [(ngModel)]=\\\"qty\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-12\\\">\\r\\n      <app-people-table [people]=\\\"people\\\"></app-people-table>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 524\n// module chunks = 1","module.exports = \"<table class=\\\"table\\\">\\n  <thead>\\n  <tr>\\n    <th>Id</th>\\n    <th>Gender</th>\\n    <th>Age</th>\\n    <th>\\n      <span class=\\\"label label-danger\\\">x</span>\\n    </th>\\n    <th>\\n      <span class=\\\"label label-success\\\">y</span>\\n    </th>\\n    <th>\\n      <span class=\\\"label label-primary\\\">z</span>\\n    </th>\\n    <th>Looking</th>\\n    <th>Actions</th>\\n  </tr>\\n  </thead>\\n  <tbody>\\n  <tr *ngFor=\\\"let person of people\\\">\\n    <td><pre>{{person.person_id}}</pre></td>\\n    <td>{{person.rolling_expected_values.gender}}</td>\\n    <td>{{person.rolling_expected_values.age}}</td>\\n    <td>\\n      <span class=\\\"label label-danger\\\">{{person.coordinates.x}}</span>\\n    </td>\\n    <td>\\n      <span class=\\\"label label-success\\\">{{person.coordinates.y}}</span>\\n    </td>\\n    <td>\\n      <span class=\\\"label label-primary\\\">{{person.coordinates.z}}</span>\\n    </td>\\n    <td>{{person.looking_at_screen}}</td>\\n    <td>\\n      <button class=\\\"btn btn-danger\\\" (click)=\\\"removePerson(person.person_id)\\\">X</button>\\n    </td>\\n  </tr>\\n  </tbody>\\n</table>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/people-table/people-table.component.html\n// module id = 525\n// module chunks = 1","module.exports = \"<div *ngIf=\\\"viewer\\\" class=\\\"panel panel-default\\\">\\r\\n  <div class=\\\"panel-heading\\\">\\r\\n    {{viewer.rolling_expected_values.gender}}, {{viewer.rolling_expected_values.devAge}} years old\\r\\n  </div>\\r\\n  <div class=\\\"panel-body\\\">\\r\\n    <p>\\r\\n      Id: {{viewer.person_id}}\\r\\n    </p>\\r\\n    <p>\\r\\n      Came on: {{getTime(viewer.local_timestamp)}}\\r\\n    </p>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/person/person.component.html\n// module id = 526\n// module chunks = 1"],"sourceRoot":""}