{"version":3,"sources":["webpack:///./src/app/viewer-detection-output.service.ts","webpack:///./src/app/viewer-detection.service.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/person/person.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/app/app.component.scss","webpack:///./src/app/person/person.component.scss","webpack:///./src/app/app.component.html","webpack:///./src/app/person/person.component.html"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {Subject} from 'rxjs/Rx';\r\nimport {ViewerDetectionService} from \"./viewer-detection.service\";\r\nimport {IViewer} from \"./iviewer\";\r\nimport {Observable} from \"rxjs/Observable\";\r\n\r\nconst viewerUrl = 'ws://localhost:3333/';\r\n\r\n@Injectable()\r\nexport class ViewerDetectionOutputService {\r\n\r\n  constructor(public wsService: ViewerDetectionService) {\r\n    this.messages = <Subject<any>>wsService\r\n      .connect(viewerUrl)\r\n      .map((response: MessageEvent): IViewer[] => {\r\n        const res = JSON.parse(response.data);\r\n        return JSON.parse(response.data);\r\n      });\r\n  }\r\n\r\n  public messages: Subject<any>;\r\n  public connection: Observable<any> = this.wsService.connection;\r\n  public ws = this.wsService.ws;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/viewer-detection-output.service.ts","import {Injectable} from '@angular/core';\r\nimport * as Rx from 'rxjs/Rx';\r\n\r\n@Injectable()\r\nexport class ViewerDetectionService {\r\n\r\n  private subject: Rx.Subject<MessageEvent>;\r\n  public connection: Rx.ReplaySubject<any>;\r\n  public ws;\r\n\r\n  constructor() {\r\n    this.connection = new Rx.ReplaySubject();\r\n  }\r\n\r\n  public connect(url): Rx.Subject<MessageEvent> {\r\n    if (!this.subject) {\r\n      this.subject = this.create(url);\r\n    }\r\n    return this.subject;\r\n  }\r\n\r\n  private create(url): Rx.Subject<MessageEvent> {\r\n    let ws = new WebSocket(url);\r\n\r\n    ws.onopen = () => {\r\n      this.connection.next({text: 'Connection established'});\r\n    };\r\n    this.ws = ws;\r\n\r\n    let observable = Rx.Observable.create((obs: Rx.Observer<MessageEvent>) => {\r\n      ws.onmessage = obs.next.bind(obs);\r\n      ws.onerror = obs.error.bind(obs);\r\n      ws.onclose = obs.complete.bind(obs);\r\n      return ws.close.bind(ws);\r\n    });\r\n\r\n    let observer = {\r\n      next: (data: Object) => {\r\n        console.log(ws.readyState, WebSocket.OPEN);\r\n        if (ws.readyState === WebSocket.OPEN) {\r\n          ws.send(JSON.stringify(data));\r\n        }\r\n      }\r\n    };\r\n\r\n    return Rx.Subject.create(observer, observable);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/viewer-detection.service.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 351;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 351\n// module chunks = 1","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import {Component, OnDestroy} from '@angular/core';\r\n\r\nimport {ViewerDetectionOutputService} from './viewer-detection-output.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\n\r\nexport class AppComponent implements OnDestroy{\r\n\r\n  private initMessage: any = {\r\n    type: 'rpc',\r\n    message_id: '26fcc4a9-2fc5-4c46-a272-5e33485d9026',\r\n    method_name: 'request_manifest',\r\n    data: {}\r\n  };\r\n  public statusText: string = 'Connecting...';\r\n\r\n  constructor(public viewerDetectionOutput: ViewerDetectionOutputService) {\r\n    viewerDetectionOutput.messages\r\n      .subscribe(msg => {\r\n        // console.log(msg);\r\n      });\r\n\r\n    viewerDetectionOutput.connection\r\n      .subscribe((data) => {\r\n        this.statusText = data.text;\r\n\r\n        viewerDetectionOutput.messages\r\n          .next(this.initMessage);\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.viewerDetectionOutput.messages.unsubscribe();\r\n    this.viewerDetectionOutput.messages.complete();\r\n    this.viewerDetectionOutput.ws.close();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {BrowserModule} from '@angular/platform-browser';\r\nimport {NgModule} from '@angular/core';\r\nimport {FormsModule} from '@angular/forms';\r\nimport {HttpModule} from '@angular/http';\r\n\r\nimport {AppComponent} from './app.component';\r\n\r\nimport {ViewerDetectionService} from './viewer-detection.service';\r\nimport {ViewerDetectionOutputService} from './viewer-detection-output.service';\r\n\r\nimport {PersonComponent} from './person/person.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    PersonComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    HttpModule\r\n  ],\r\n  providers: [ViewerDetectionService, ViewerDetectionOutputService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import {Component, Input} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-person',\r\n  templateUrl: './person.component.html',\r\n  styleUrls: ['./person.component.scss']\r\n})\r\nexport class PersonComponent {\r\n  @Input() viewer: any;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  getTime(timestamp: number): string {\r\n    const time = new Date(timestamp);\r\n\r\n    return `${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/person/person.component.ts","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".group-header {\\n  border-bottom: 1px solid lightgray; }\\n\\n.separator-top {\\n  margin-top: 20px; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.scss\n// module id = 517\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".panel-heading {\\n  text-transform: uppercase; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/person/person.component.scss\n// module id = 518\n// module chunks = 1","module.exports = \"<div class=\\\"container\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n      <img src=\\\"../assets/advertima-logo.png\\\" alt=\\\"\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n  <div>{{statusText}}</div>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-xs-12\\\">\\r\\n      <div class=\\\"panel panel-default\\\">\\r\\n        <div class=\\\"panel-heading\\\">New Person(s)</div>\\r\\n        <div class=\\\"panel-body\\\">\\r\\n          <form>\\r\\n            <div class=\\\"col-xs-6\\\">\\r\\n              <p class=\\\"group-header\\\">Gender: </p>\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"radio-inline\\\"><input type=\\\"radio\\\" name=\\\"gender\\\" value=\\\"male\\\">Male</label>\\r\\n                <label class=\\\"radio-inline\\\"><input type=\\\"radio\\\" name=\\\"gender\\\" value=\\\"female\\\">Female</label>\\r\\n                <label class=\\\"radio-inline\\\"><input type=\\\"radio\\\" name=\\\"gender\\\" value=\\\"random\\\" checked>Hermaphrodite\\r\\n                  (randomize)</label>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-6\\\">\\r\\n              <p class=\\\"group-header\\\">Age: </p>\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <div class=\\\"col-xs-6\\\">\\r\\n                  <label for=\\\"value\\\">Value</label>\\r\\n                  <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"value\\\" value=\\\"30\\\" step=\\\".01\\\">\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <div class=\\\"col-xs-6\\\">\\r\\n                  <label for=\\\"deviation\\\">Deviation</label>\\r\\n                  <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"deviation\\\" value=\\\"1\\\" step=\\\".01\\\">\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-6 separator-top\\\">\\r\\n              <p class=\\\"group-header\\\">Position</p>\\r\\n              <div class=\\\"col-xs-4\\\">\\r\\n                <label for=\\\"y\\\">X</label>\\r\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"x\\\" value=\\\"0\\\" step=\\\".01\\\">\\r\\n              </div>\\r\\n              <div class=\\\"col-xs-4\\\">\\r\\n                <label for=\\\"x\\\">Y</label>\\r\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"y\\\" value=\\\"0\\\" step=\\\".01\\\">\\r\\n              </div>\\r\\n              <div class=\\\"col-xs-4\\\">\\r\\n                <label for=\\\"z\\\">Z</label>\\r\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"z\\\" value=\\\"0\\\" step=\\\".01\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-6 separator-top\\\">\\r\\n              <p class=\\\"group-header\\\">Other Options</p>\\r\\n              <label class=\\\"checkbox-inline\\\"><input type=\\\"checkbox\\\" value=\\\"\\\">Looking at Screen</label>\\r\\n            </div>\\r\\n          </form>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 520\n// module chunks = 1","module.exports = \"<div *ngIf=\\\"viewer\\\" class=\\\"panel panel-default\\\">\\r\\n  <div class=\\\"panel-heading\\\">\\r\\n      {{viewer.rolling_expected_values.gender}}, {{viewer.rolling_expected_values.age}} years old\\r\\n  </div>\\r\\n  <div class=\\\"panel-body\\\">\\r\\n    <p>\\r\\n      Id: {{viewer.person_id}}\\r\\n    </p>\\r\\n    <p>\\r\\n      Came on: {{getTime(viewer.local_timestamp)}}\\r\\n    </p>\\r\\n  </div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/person/person.component.html\n// module id = 521\n// module chunks = 1"],"sourceRoot":""}